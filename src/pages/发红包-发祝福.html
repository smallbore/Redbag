<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    @@include('./include/header.html')
    <title>发红包-发祝福</title>

</head>
<body>
<div class="page">
    <div class="page-hd">
         @@include('./include/page-hd.html', { "title": "发红包", "menu": "" })
    </div>
    <div class="page-bd bag_init">
        <!-- 页面内容-->
        <div class="bscroll">
            <div class="weui-top">
                <div class="weui-flex tap_flex">
                    <a class="weui-flex__item " href="发红包-发广播.html">
                        发广播
                    </a>
                    <a class="weui-flex__item active" href="发红包-发祝福.html">
                        发祝福
                    </a>
                </div>
                <div class="my-data_box">
                    <a class="tx_list m_title" href="javascript:;">提现记录</a>
                    <div class="my-data_img">
                        <img src="../assets/images/tx00.jpg" alt="" />
                    </div>
                    
                    <div class="weui-cell border-none pd20" style="margin-top:-14px;">
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" placeholder="你想对大家说..." />
                        </div>
                    </div>
                    <div class="weui-cell pd20 flex-end">
                        <div class="weui-cell__bd put-img_box">
                            <span class="put-img">
                                <img src="../assets/images/images.png" alt="" />
                            </span>
                            <span class="add_img-btn">
                                <img src="../assets/images/add_icon.png" class="add_icon" alt="" />
                                <div class="m_text">添加图片</div>
                            </span>
                        </div>
                        <div class="weui-flex weui-show">
                            <div class="look_icon">
                                <img src="../assets/images/search01.png" alt="" />
                            </div>
                            <div class="weui-flex__item">
                                <span class="m_text">预览效果</span>
                            </div>
                        </div>
                    </div>
                    <div class="weui-cell pd20">
                        <div class="weui-cell__bd">
                           <div class="weui-flex flex-center open-flex">
                               <div class="weui-flex__item">
                                   <div class="x_title">总金额</div>
                               </div>
                               <div class="weui-flex__inp">
                                   <input class="weui-input" type="text" placeholder="输入金额" />
                               </div>
                                <div class="m_title">元</div>
                           </div>
                           <div class="input_tip">
                               <div class="m_text">附近的人可随机领取该红包</div>
                           </div>

                            <div class="weui-flex flex-center open-flex">
                                <div class="weui-flex__item">
                                    <div class="x_title">红包个数</div>
                                </div>
                                <div class="weui-flex__inp">
                                    <input class="weui-input" type="text" placeholder="填写个数" />
                                </div>
                                <div class="m_title">元</div>
                            </div>
                            <div class="input_tip">
                                <div class="m_text">最多可让附近的人领取的红包数</div>
                            </div>

                            <div class="weui-flex flex-center open-flex weui-cell_access" >
                                <div class="weui-flex__item">
                                    <div class="x_title">位置/范围</div>
                                </div>
                                <div class="weui-flex__inp">
                                    <!-- <div class="m_title">全市</div> -->
                                    <input class="weui-input" type="text" placeholder="" value="全市" id='picker' />
                                </div>
                                <div class="weui-cell__ft"></div>
                            </div>
                            <div class="input_tip">
                                <div class="m_text">天河区</div>
                            </div>
                            <div class="weui-cells weui-cells_radio small_radio border-none">
                                <div class="weui-cell weui-check__label" style="padding:0 10px;">
                                    <label class="weui-cell__hd" for="x11">
                                        <input type="checkbox" class="weui-check" name="radio1" id="x11">
                                        <span class="weui-icon-checked"></span>
                                    </label>
                                    <div class="weui-cell__bd">
                                        <div class="weui-flex flex-center">
                                            <label class="x_text" for="x11">红包加密 (选填项)</label>
                                            <div class="guizhi_btn open-popup" data-target="#bagrule">
                                                <img src="../assets/images/wen_icon.png" />
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="weui-cell__ft pass_show" style="display:none">
                                         <span class="m-text" id="pass_num">5236</span>
                                         <span class="text-blue" id="pass_change">修改</span>
                                    </div>
                                </div>
                            </div>
                            <div class="weui-cell border-none pd20">
                                <div class="weui-cell__bd ">
                                    <a href="javascript:;" class="weui-btn weui-btn_primary">退出账号</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>

        </div>
    </div>

</div>

<!-- 设置红包密码 -->
<div id="bagpass" class="weui-popup__container popup-bottom popup-center">
    <div class="weui-popup__overlay no_close"></div>
    <div class="weui-popup__modal pass_modal">
        <div class="weui-cell pd20">
            <div class="weui-cell__bd">
                <div class="modal_title">设置红包密码</div>
                <div class="input_hide" style="position:absolute;left:-1000px;">
                    <input class="weui-input" type="tel" id="wordpass" maxlength="4" onkeyup="inpChange()" />
                </div>
                <label class="weui-flex input_flexbox" for="wordpass">
                    <div class="weui-flex__item">
                        <div class="passinput blink"></div>
                    </div>
                    <div class="weui-flex__item">
                        <div class="passinput"> </div>
                    </div>
                    <div class="weui-flex__item">
                        <div class="passinput"> </div>
                    </div>
                    <div class="weui-flex__item">
                        <div class="passinput"> </div>
                    </div>
                </label>
                <div class="x_text">该密码用于开启本红包</div>
                <div class="x_text"><span class="x_title">备注:</span>加我微信可以获取密码linlin123</div>
            </div>
        </div>
        <div class="weui-cell border-left_0 btn_select">
            <div class="weui-cell__bd close_btn">
                <span class="text-default ">取消</span>
            </div>
            <div class="weui-cell__bd confirm_btn">
                <span class="text-red ">确定</span>
            </div>
        </div>
    </div>
</div>

<!-- 密码红包规则 -->
<div id="bagrule" class="weui-popup__container popup-bottom popup-center">
    <div class="weui-popup__overlay"></div>
    <div class="weui-popup__modal pass_modal">
        <div class="weui-cell pd20">
            <div class="weui-cell__bd">
                <div class="modal_title">密码红包规则</div>
            </div>
        </div>
        <div class="weui-cell border-none pd20 flex-start">
            <div class="weui-cell__hd">
                <span class="dian_icon"></span>
            </div>
            <div class="weui-cell__bd">
                <div class="x_title tl">红包设置密码后，用户领取红包需输入红包密码。</div>
            </div>
        </div>
        <div class="weui-cell border-none pd20 flex-start">
            <div class="weui-cell__hd">
                <span class="dian_icon"></span>
            </div>
            <div class="weui-cell__bd ">
                <div class="x_title tl">红包密码的有效期为5分钟，超出有效期，密码自动失效，领取该红包将无需密码。</div>
            </div>
        </div>
        <div class="weui-cell border-left_0 no_a btn_select">
            <div class="weui-cell__bd close-popup">
                <span class="text-red">确定</span>
            </div>
        </div>
    </div>
</div>

@@include('./include/footer.html')
<script src="../assets/js/bscroll.min.js"></script>
<script>

    $("#picker").on("click",function(){
        $("input").blur()
    })
    $("#picker").picker({
        title: "请选择您的地区",
        cols: [
            {
                textAlign: 'center',
                values: ['天河区', '天河区', '天河区', '天河区', '天河区', '天河区', '天河区', '天河区', '天河区', '天河区',]
            }
        ],
        onChange: function (p, v, d) {
            console.log(v)
        }
    });

    // 规则
    $(".guizhi_btn").on("click",function(){
        console.log(111)
    })

    // 红包加密 
    $("#x11").change(function(){
        var _checked = $(this).prop("checked");
        console.log(_checked)
        if(_checked){
            $("#bagpass").popup();
            $("#wordpass").focus(); 
        }else{
            $(".pass_show").hide()
        }

    })
    // 密码输入
    function inpChange(){
        var wpval = $('#wordpass').val();

        if (wpval.length === 0) {
            $(".input_flexbox>div").find(".passinput").text('')

            $(".passinput").removeClass("blink")
            $(".input_flexbox>div").eq(0).find(".passinput").addClass("blink")
        } else if (wpval.length === 1) {
            $(".input_flexbox>div").eq(0).find(".passinput").text(wpval[0]).parent().siblings().find(".passinput").text('')

            $(".passinput").removeClass("blink")
            $(".input_flexbox>div").eq(1).find(".passinput").addClass("blink")
        } else if (wpval.length === 2) {
            $(".input_flexbox>div").eq(1).find(".passinput").text(wpval[1])
            $(".input_flexbox>div").eq(2).find(".passinput").text('')
            $(".input_flexbox>div").eq(3).find(".passinput").text('')

            $(".passinput").removeClass("blink")
            $(".input_flexbox>div").eq(2).find(".passinput").addClass("blink")
        } else if (wpval.length === 3) {
            $(".input_flexbox>div").eq(2).find(".passinput").text(wpval[2])
            $(".input_flexbox>div").eq(3).find(".passinput").text('')

            $(".passinput").removeClass("blink")
            $(".input_flexbox>div").eq(3).find(".passinput").addClass("blink")

        } else if (wpval.length === 4) {
            $(".input_flexbox>div").eq(3).find(".passinput").text(wpval[3])
            $("#wordpass").blur()

            $(".passinput").removeClass("blink")
        } else {
            $("#wordpass").blur()
        }
    }
    // 密码蒙版，不关闭
    $(".no_close").click(function(){
        return false;
    })
    // 点击关闭
    $(".close_btn").on("click",function(){
        $.closePopup("#bagpass");
        $("#x11").attr("checked",false);
    })
    // 点击确认
    $(".confirm_btn").on("click",function(){
        var _var = $("#wordpass").val();
        if(_var.length === 4){
            $.closePopup("#bagpass");
            $("#pass_num").text(_var);
            $(".pass_show").show()
        }else{
            console.log("输入错误")
        }
    })
    // pass_change
    $("#pass_change").on("click",function(){
        $("#bagpass").popup();
        $("#wordpass").focus(); 
    })
</script>
</body>
</html>